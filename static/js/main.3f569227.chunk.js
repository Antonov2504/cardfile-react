(this["webpackJsonpcardfile-react"]=this["webpackJsonpcardfile-react"]||[]).push([[0],{28:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(21),r=a.n(c),i=a(9),o=(a(28),a(14)),l=a(2),u=a(3),m=a(4),j=a(13);var d=function(e,t){var a=Object(n.useState)(Object(l.a)({},e)),s=Object(u.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)({name:"",value:""}),o=Object(u.a)(i,2),m=o[0],d=o[1],b=Object(n.useState)(Object(l.a)({},e)),p=Object(u.a)(b,2),O=p[0],_=p[1],f=Object(n.useState)(!1),h=Object(u.a)(f,2),g=h[0],x=h[1],v=Object(n.useState)({}),N=Object(u.a)(v,2),y=N[0],C=N[1];function E(e){var t=e.name,a=e.value;_(Object(l.a)(Object(l.a)({},O),{},Object(j.a)({},t,!0))),d(Object(l.a)(Object(l.a)({},m),{},{name:t,value:a}))}return Object(n.useEffect)((function(){var e=Object.keys(O).every((function(e){return O[e]}));O[m.name]&&C(Object(l.a)(Object(l.a)({},y),t(m))),e&&_(Object(l.a)(Object(l.a)({},O),{},{form:!0}))}),[m]),Object(n.useEffect)((function(){var e=Object.keys(y).every((function(e){return!y[e]}));O.form&&e?x(!0):x(!1)}),[y]),Object(n.useEffect)((function(){x(!1)}),[]),{inputValues:c,setFormInputValues:function(e){_({all:!0}),r(Object(l.a)(Object(l.a)({},c),e))},clearFormInputValues:function(){r({})},clearValidationErrors:function(){C({})},validationErrors:y,handleChange:function(e){var t=e.target,a=t.name,n=t.value;r(Object(l.a)(Object(l.a)({},c),{},Object(j.a)({},a,n))),E(e.target)},runFormValidation:function(){for(var e in c)E({name:e,value:c[e]})},isValidForm:g}},b={first_name:{empty:!0,regExp:/^[a-zA-Z\u0430-\u044f\u0410-\u042f\s\u0451\-]+$/i,minLength:2,maxLength:30},last_name:{empty:!0,regExp:/^[a-zA-Z\u0430-\u044f\u0410-\u042f\s\u0451\-]+$/i,minLength:2,maxLength:30},email:{empty:!0,regExp:/^(([^#<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},avatar:{regExp:/(https?:\/\/(([\w-]+\.)+)+([\w])+((\/[a-z_0-9\-:~\\.%\\/?#[\]@!$&'\\(\\)*+,;=]+)+)?)/i},password:{empty:!0,regExp:/^[a-zA-Z0-9:%.,_+~#=@]+$/}},p={first_name:{empty:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f",regExp:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b",minLength:"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0438\u043c\u044f \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 ".concat(b.first_name.minLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),maxLength:"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0438\u043c\u044f \u043d\u0435 \u0434\u043b\u0438\u043d\u043d\u0435\u0435 ".concat(b.first_name.maxLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")},last_name:{empty:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",regExp:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b",minLength:"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 ".concat(b.last_name.minLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),maxLength:"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043d\u0435 \u0434\u043b\u0438\u043d\u043d\u0435\u0435 ".concat(b.last_name.maxLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")},email:{empty:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 Email",regExp:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email"},avatar:{regExp:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430"},password:{empty:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",regExp:"\u041f\u0430\u0440\u043e\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0445 \u0431\u0443\u043a\u0432, \u0446\u0438\u0444\u0440 \u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 : % . , _ + ~ # = @"}};var O=function(e){var t={};return b[e.name].empty&&!e.value.trim()?(t[e.name]=p[e.name].empty,t):(t[e.name]="",b[e.name].regExp&&e.value&&!b[e.name].regExp.test(e.value)?(t[e.name]=p[e.name].regExp,t):(t[e.name]="",b[e.name].minLength&&e.value.length<b[e.name].minLength?(t[e.name]=p[e.name].minLength,t):(t[e.name]="",b[e.name].maxLength&&e.value.length>b[e.name].maxLength?(t[e.name]=p[e.name].maxLength,t):(t[e.name]="",t))))},_=a(0);var f=function(e){var t=e.isLoading,a=e.isErrorResponse,n=e.handleLogin,s=d({email:"",password:""},O),c=s.inputValues,r=s.handleChange,i=s.validationErrors,o=s.isValidForm;return Object(_.jsxs)("section",{className:"sign",children:[Object(_.jsx)("div",{className:"logo logo_align_center",children:"B"}),Object(_.jsx)("p",{className:"sign__heading",children:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!"}),Object(_.jsxs)("form",{name:"login-form",className:"sign__form",onSubmit:function(e){e.preventDefault();var t=c.email,a=c.password;t&&a&&o&&n(t,a)},children:[Object(_.jsxs)("fieldset",{className:"sign__fieldset",children:[Object(_.jsxs)("label",{className:"sign__label",children:[Object(_.jsx)("span",{className:"sign__field",children:"E-mail"}),Object(_.jsx)("input",{type:"text",name:"email",value:c.email,className:"sign__input ".concat(i.email&&"sign__input_type_error"),onChange:r,autoComplete:"off"}),i.email&&Object(_.jsx)("p",{className:"validity-error",children:i.email})]}),Object(_.jsxs)("label",{className:"sign__label",children:[Object(_.jsx)("span",{className:"sign__field",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(_.jsx)("input",{type:"password",name:"password",value:c.password,className:"sign__input ".concat(i.password&&"sign__input_type_error"),onChange:r}),i.password&&Object(_.jsx)("p",{className:"validity-error",children:i.password})]})]}),a.status&&Object(_.jsx)("p",{className:"server-error",children:a.message}),t&&Object(_.jsx)("div",{className:"sign__preloader"}),!t&&Object(_.jsx)("button",{type:"submit",className:"sign__button",disabled:!o,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},h=function(){return Object(_.jsx)("div",{className:"preloader",children:Object(_.jsx)("div",{className:"preloader__container",children:Object(_.jsx)("span",{className:"preloader__round"})})})};var g=function(e){var t=e.text;return Object(_.jsx)("p",{className:"plug",children:t})},x=a.p+"static/media/no-photo.9b04560d.svg",v="\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437";var N=function(e){var t=e.card,a=e.onCardEdit,s=e.onCardDelete,c=Object(n.useState)({src:t.avatar,alt:"".concat(t.first_name," ").concat(t.last_name),errored:!1}),r=Object(u.a)(c,2),i=r[0],o=r[1];return Object(n.useEffect)((function(){o(Object(l.a)(Object(l.a)({},i),{},{src:t.avatar||x,alt:"".concat(t.first_name," ").concat(t.last_name),errored:!1}))}),[t]),Object(_.jsxs)("li",{className:"card",children:[Object(_.jsxs)("div",{className:"card__info",children:[Object(_.jsx)("img",{src:i.src,alt:i.alt,className:"card__image ".concat(i.errored&&"card__image_type_no-image"),onError:function(){i.errored||o(Object(l.a)(Object(l.a)({},i),{},{src:x,alt:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",errored:!0}))}}),Object(_.jsxs)("h2",{className:"card__name",children:[t.first_name," ",t.last_name]}),Object(_.jsx)("p",{className:"card__email",children:t.email})]}),Object(_.jsxs)("div",{className:"card__buttons",children:[Object(_.jsx)("button",{type:"button",className:"card__button card__button_type_edit",onClick:function(){return a(t)}}),Object(_.jsx)("button",{type:"button",className:"card__button card__button_type_delete",onClick:function(){s(t)}})]})]})};var y=function(e){var t=e.cards,a=e.isLoadingCards,n=e.isAllCards,s=e.isError,c=e.onCardEdit,r=e.onCardDelete;return Object(_.jsxs)("section",{className:"elements",children:[s&&s.status&&Object(_.jsx)(g,{text:s.message}),!!t.length&&Object(_.jsx)("ul",{className:"cards ".concat(n&&"cards_quantity_max"),children:t.map((function(e){return Object(_.jsx)(N,{card:e,onCardEdit:c,onCardDelete:r},e.id)}))}),a&&Object(_.jsx)(h,{})]})},C=a(23),E=s.a.createContext();var S=function(e){var t=e.onAddUser,a=e.onClickSignout,s=Object(n.useContext)(E);return Object(_.jsxs)("header",{className:"header",children:[Object(_.jsx)("div",{className:"logo",children:"B"}),s.loggedIn&&Object(_.jsxs)("div",{className:"header__buttons",children:[Object(_.jsx)("button",{type:"button",className:"header__button header__button_type_add-user",onClick:t,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(_.jsx)("button",{type:"button",className:"header__button",children:Object(_.jsx)(i.b,{to:"/signin",className:"header__link",onClick:a,children:"\u0412\u044b\u0439\u0442\u0438"})})]})]})};var L=function(){return Object(_.jsx)("section",{className:"footer",children:Object(_.jsx)("p",{className:"footer__text",children:"\xa9 2021 \u041a\u0430\u0440\u0442\u043e\u0442\u0435\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043e\u0442 reqres.in"})})},k=["component"];var w=function(e){var t=e.component,a=Object(C.a)(e,k),s=Object(n.useContext)(E);return Object(_.jsxs)(m.b,{children:[Object(_.jsx)(S,Object(l.a)({},a)),s.loggedIn?Object(_.jsx)(t,Object(l.a)({},a)):Object(_.jsx)(m.a,{to:"/signin"}),Object(_.jsx)(L,{})]})};var F=function(){var e=Object(m.g)();return Object(_.jsxs)("section",{className:"notFoundPage",children:[Object(_.jsxs)("div",{className:"notFoundPage__container",children:[Object(_.jsx)("p",{className:"notFoundPage__title",children:"404"}),Object(_.jsx)("p",{className:"notFoundPage__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]}),Object(_.jsx)("button",{type:"button",className:"notFoundPage__button",onClick:function(){e.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})};var U=function(e){var t=e.isOpened,a=e.name,n=e.title,s=e.children,c=e.onClose,r=e.onSubmit;return Object(_.jsx)("div",{className:"popup ".concat(t&&"popup_opened"," popup_type_").concat(a),onClick:function(e){e.target.classList.contains("popup")&&c()},children:Object(_.jsxs)("div",{className:"popup__container",children:[Object(_.jsx)("button",{type:"button",className:"popup__button popup__button_type_close-popup",onClick:c}),Object(_.jsxs)("form",{action:"#",name:"".concat(a),className:"form",onSubmit:r,noValidate:!0,children:[Object(_.jsx)("h2",{className:"popup__heading",children:n}),s]})]})})};var V=function(e){var t=e.currentUser,a=e.isOpen,s=e.onClose,c=e.onUpdate,r=e.isLoading,i=e.isErrorResponse,o=d({first_name:t.first_name,last_name:t.last_name,email:t.email,avatar:t.avatar},O),l=o.inputValues,u=o.setFormInputValues,m=o.clearValidationErrors,j=o.handleChange,b=o.validationErrors,p=o.isValidForm;return Object(n.useEffect)((function(){m(),u(t)}),[t]),Object(_.jsxs)(U,{isOpened:a,onClose:s,onSubmit:function(e){e.preventDefault();var t=l.id,a=l.first_name,n=l.last_name,s=l.email,r=l.avatar;a&&n&&s&&p&&c({id:t,first_name:a,last_name:n,email:s,avatar:r})},name:"edit-user-data",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",children:[Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"first_name",value:l.first_name,placeholder:"\u0418\u043c\u044f",className:"form__input ".concat(b.first_name&&"form__input_type_error"),onChange:j,autoComplete:"off"}),b.first_name&&Object(_.jsx)("p",{className:"validity-error",children:b.first_name})]}),Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"last_name",value:l.last_name,placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:"form__input ".concat(b.last_name&&"form__input_type_error"),onChange:j,autoComplete:"off"}),b.last_name&&Object(_.jsx)("p",{className:"validity-error",children:b.last_name})]}),Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"email",value:l.email,placeholder:"Email",className:"form__input ".concat(b.email&&"form__input_type_error"),onChange:j,autoComplete:"off"}),b.email&&Object(_.jsx)("p",{className:"validity-error",children:b.email})]}),Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"avatar",value:l.avatar,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",className:"form__input ".concat(b.avatar&&"form__input_type_error"),onChange:j,autoComplete:"off"}),b.avatar&&Object(_.jsx)("p",{className:"validity-error",children:b.avatar})]}),i.status&&Object(_.jsx)("p",{className:"server-error",children:i.message}),r&&Object(_.jsx)("div",{className:"preloader preloader_type_button"}),!r&&Object(_.jsx)("button",{type:"submit",className:"form__button",disabled:!p,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})};var A=function(e){var t=e.isOpen,a=e.onClose,n=e.onAdd,s=e.isLoading,c=e.isErrorResponse,r=d({first_name:"",last_name:"",email:"",avatar:""},O),i=r.inputValues,o=r.clearFormInputValues,l=r.handleChange,u=r.validationErrors,m=r.isValidForm;return Object(_.jsxs)(U,{isOpened:t,onClose:a,onSubmit:function(e){e.preventDefault();var t=i.first_name,a=i.last_name,s=i.email,c=i.avatar;t&&a&&s&&m&&(n({first_name:t,last_name:a,email:s,avatar:void 0===c?x:c}),o())},name:"add-user",title:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",children:[Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"first_name",value:i.first_name||"",placeholder:"\u0418\u043c\u044f",className:"form__input ".concat(u.first_name&&"form__input_type_error"),onChange:l,autoComplete:"off"}),u.first_name&&Object(_.jsx)("p",{className:"validity-error",children:u.first_name})]}),Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"last_name",value:i.last_name||"",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:"form__input ".concat(u.last_name&&"form__input_type_error"),onChange:l,autoComplete:"off"}),u.last_name&&Object(_.jsx)("p",{className:"validity-error",children:u.last_name})]}),Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"email",value:i.email||"",placeholder:"Email",className:"form__input ".concat(u.email&&"form__input_type_error"),onChange:l,autoComplete:"off"}),u.email&&Object(_.jsx)("p",{className:"validity-error",children:u.email})]}),Object(_.jsxs)("label",{className:"form__field",children:[Object(_.jsx)("input",{type:"text",name:"avatar",value:i.avatar||"",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",className:"form__input ".concat(u.avatar&&"form__input_type_error"),onChange:l,autoComplete:"off"}),u.avatar&&Object(_.jsx)("p",{className:"validity-error",children:u.avatar})]}),c.status&&Object(_.jsx)("p",{className:"sign__error",children:c.message}),s&&Object(_.jsx)("div",{className:"preloader preloader_type_button"}),!s&&Object(_.jsx)("button",{type:"submit",className:"form__button",disabled:!m,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})};var I=function(e){var t=e.cardId,a=e.isOpen,n=e.onClose,s=e.onCardDelete,c=e.isLoading,r=e.isErrorResponse;return Object(_.jsxs)(U,{isOpened:a,onClose:n,onSubmit:function(e){e.preventDefault(),s(t)},name:"delete-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",children:[r.status&&Object(_.jsx)("p",{className:"sign__error",children:r.message}),c&&Object(_.jsx)("div",{className:"preloader preloader_type_button"}),!c&&Object(_.jsx)("button",{type:"submit",className:"form__button",children:"\u0414\u0430"})]})},D=function(e){return e.ok?e.json():e.text()};var P=function(e){var t=e.baseUrl;return{authorize:function(e,a){return fetch("".concat(t,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}).then(D).then((function(e){return e.token?(localStorage.setItem("token",e.token),e):e}))},getUsers:function(e){return fetch("".concat(t,"/users?page=").concat(e),{headers:{"Content-Type":"application/json"}}).then(D)},createUser:function(e){return fetch("".concat(t,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(D)},updateUser:function(e){return fetch("".concat(t,"/users/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(D)},deleteUser:function(e){return fetch("".concat(t,"/users/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})}}};var T=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight,pageYOffset:e.pageYOffset,scrollHeight:document.body.scrollHeight}};var J=function(){var e=Object(m.g)(),t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)([]),i=Object(u.a)(r,2),j=i[0],d=i[1],b=Object(n.useState)([]),p=Object(u.a)(b,2),O=p[0],h=p[1],g=Object(n.useState)({id:"",first_name:"",last_name:"",email:"",avatar:""}),x=Object(u.a)(g,2),N=x[0],C=x[1],S=Object(n.useState)(0),L=Object(u.a)(S,2),k=L[0],U=L[1],D=Object(n.useState)({}),J=Object(u.a)(D,2),R=J[0],z=J[1],B=Object(n.useState)(!1),H=Object(u.a)(B,2),Z=H[0],$=H[1],q=Object(n.useState)(!1),Y=Object(u.a)(q,2),M=Y[0],W=Y[1],G=Object(n.useRef)(1),K=Object(n.useState)(!1),Q=Object(u.a)(K,2),X=Q[0],ee=Q[1],te=Object(n.useState)(!1),ae=Object(u.a)(te,2),ne=ae[0],se=ae[1],ce=Object(n.useState)(!1),re=Object(u.a)(ce,2),ie=re[0],oe=re[1],le=Object(n.useState)(!1),ue=Object(u.a)(le,2),me=ue[0],je=ue[1],de=Object(n.useState)(!1),be=Object(u.a)(de,2),pe=be[0],Oe=be[1],_e=Object(n.useState)(!1),fe=Object(u.a)(_e,2),he=fe[0],ge=fe[1],xe=Object(n.useState)(!1),ve=Object(u.a)(xe,2),Ne=ve[0],ye=ve[1],Ce=Object(n.useState)(!1),Ee=Object(u.a)(Ce,2),Se=Ee[0],Le=Ee[1],ke=Object(n.useState)({status:!1,message:v}),we=Object(u.a)(ke,2),Fe=we[0],Ue=we[1],Ve=Object(n.useState)({status:!1,message:v}),Ae=Object(u.a)(Ve,2),Ie=Ae[0],De=Ae[1],Pe=Object(n.useState)({status:!1,message:v}),Te=Object(u.a)(Pe,2),Je=Te[0],Re=Te[1],ze=Object(n.useState)({status:!1,message:v}),Be=Object(u.a)(ze,2),He=Be[0],Ze=Be[1],$e=Object(n.useState)({status:!1,message:v}),qe=Object(u.a)($e,2),Ye=qe[0],Me=qe[1],We=P({baseUrl:"https://reqres.in/api"});function Ge(){ge(!1),ye(!1),Le(!1)}function Ke(){ee(!0),We.getUsers(G.current).then((function(e){e.data.length&&G.current<=e.total_pages?(d(e.data),G.current++):(d([]),W(!0)),ee(!1)})).catch((function(e){console.log(e),Me(Object(l.a)(Object(l.a)({},Ye),{},{status:!0}))}))}return Object(n.useEffect)((function(){localStorage.getItem("token")?(e.push("/"),c(!0)):c(!1)}),[]),Object(n.useEffect)((function(){Ke(),h(Object(o.a)(j))}),[]),Object(n.useEffect)((function(){j.length&&h([].concat(Object(o.a)(O),Object(o.a)(j)))}),[j]),Object(n.useEffect)((function(){function e(){z(T())}return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[]),Object(n.useEffect)((function(){R.height+R.pageYOffset===R.scrollHeight?$(!0):$(!1)}),[R]),Object(n.useEffect)((function(){Z&&!M&&Ke()}),[Z]),Object(n.useEffect)((function(){function e(e){"Escape"===e.key&&Ge()}return(he||Ne||Se)&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[he,Ne,Se,Ge]),Object(_.jsx)(E.Provider,{value:{loggedIn:s},children:Object(_.jsxs)("div",{className:"page__container",children:[Object(_.jsxs)(m.d,{children:[Object(_.jsx)(m.b,{path:"/signin",children:Object(_.jsx)(f,{handleLogin:function(t,a){se(!0),Ue(Object(l.a)(Object(l.a)({},Fe),{},{status:!1})),We.authorize(t,a).then((function(t){se(!1),t.token?(c(!0),e.push("/")):Ue(Object(l.a)(Object(l.a)({},Fe),{},{status:!0,message:JSON.parse(t).error}))})).catch((function(e){return console.log(e)}))},isLoading:ne,isErrorResponse:Fe})}),Object(_.jsx)(w,{exact:!0,path:"./",component:y,onAddUser:function(){ge(!0)},onClickSignout:function(){localStorage.removeItem("token"),c(!1),G.current=1,W(!1),h([]),Ke(),e.push("/signin")},cards:O,isLoadingCards:X,isAllCards:M,isError:Ye,onCardEdit:function(e){ye(!0),C(Object(l.a)(Object(l.a)({},N),{},{id:e.id,first_name:e.first_name,last_name:e.last_name,email:e.email,avatar:e.avatar}))},onCardDelete:function(e){U(e.id),Le(!0)}}),Object(_.jsx)(m.b,{path:"*",children:Object(_.jsx)(F,{})})]}),Object(_.jsx)(V,{currentUser:N,isOpen:Ne,onClose:Ge,onUpdate:function(e){je(!0),Re(Object(l.a)(Object(l.a)({},Je),{},{status:!1,message:v})),We.updateUser(e).then((function(t){if(t.updatedAt){var a=t.first_name,n=t.last_name,s=t.email,c=t.avatar;h(O.map((function(t){return t.id===e.id?Object(l.a)(Object(l.a)({},t),{},{first_name:a,last_name:n,email:s,avatar:c}):t}))),je(!1),Ge()}else Re(Object(l.a)(Object(l.a)({},Je),{},{status:!0,message:JSON.parse(t).error})),je(!1)})).catch((function(e){return console.log(e)}))},isLoading:me,isErrorResponse:Je}),Object(_.jsx)(A,{isOpen:he,onClose:Ge,onAdd:function(e){oe(!0),De(Object(l.a)(Object(l.a)({},Ie),{},{status:!1,message:v})),We.createUser(e).then((function(e){e.createdAt?(h([e].concat(Object(o.a)(O))),oe(!1),Ge()):De(Object(l.a)(Object(l.a)({},Ie),{},{status:!0,message:JSON.parse(e.text()).error}))}))},isLoading:ie,isErrorResponse:Ie}),Object(_.jsx)(I,{isOpen:Se,onClose:Ge,onCardDelete:function(e){Oe(!0),Ze(Object(l.a)(Object(l.a)({},He),{},{status:!1,message:v})),We.deleteUser(e).then((function(t){204===t.status?(h(O.filter((function(t){return t.id!==e}))),Ge()):Ze(Object(l.a)(Object(l.a)({},He),{},{status:!0,message:JSON.parse(t.text()).error})),Oe(!1)})).catch((function(e){return console.log(e)}))},cardId:k,isLoading:pe,isErrorResponse:He})]})})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,36)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(i.a,{children:Object(_.jsx)(J,{})})}),document.getElementById("root")),R()}},[[35,1,2]]]);
//# sourceMappingURL=main.3f569227.chunk.js.map