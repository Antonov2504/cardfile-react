{"version":3,"sources":["utils/useFormValidation.js","utils/validateData.js","components/Login.js","components/Preloader.js","components/Plug.js","images/no-photo.svg","utils/constants.js","components/UserCard.js","components/Main.js","contexts/AppContext.js","components/Header.js","components/Footer.js","components/ProtectedRoute.js","components/PageNotFound.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/AddUserPopup.js","components/ConfirmationPopup.js","utils/utils.js","utils/ReqresApi.js","utils/getWindowDimensions.js","components/App.js","reportWebVitals.js","index.js"],"names":["useFormValidation","inputs","validateData","useState","inputValues","setInputValues","name","value","validationInput","setValidationInput","enableValidation","setEnableValidation","isValidForm","setIsValidForm","validationErrors","setValidationErrors","changeValidationInput","input","useEffect","enableFormValidation","Object","keys","every","key","form","emptyValidationErrors","setFormInputValues","all","clearFormInputValues","clearValidationErrors","handleChange","evt","target","runFormValidation","validationRequirements","first_name","empty","regExp","minLength","maxLength","last_name","email","avatar","password","validationErrorsText","errors","trim","test","length","Login","isLoading","isErrorResponse","handleLogin","className","onSubmit","preventDefault","type","onChange","autoComplete","status","message","disabled","Preloader","Plug","text","serverRejectMessage","UserCard","card","onCardEdit","onCardDelete","src","alt","errored","cardImage","setCardImage","plugImage","onError","onClick","Main","cards","isLoadingCards","isAllCards","isError","map","id","AppContext","React","createContext","Header","onAddUser","onClickSignout","useContext","loggedIn","to","Footer","ProtectedRoute","Component","component","props","NotFoundPage","history","useHistory","goBack","PopupWithForm","isOpened","title","children","onClose","e","classList","contains","action","noValidate","EditProfilePopup","currentUser","isOpen","onUpdate","placeholder","AddUserPopup","onAdd","ConfirmationPopup","cardId","handleOriginalResponse","res","ok","json","ReqresApi","options","baseUrl","authorize","fetch","method","headers","body","JSON","stringify","then","data","token","localStorage","setItem","getUsers","pageNumber","createUser","user","updateUser","deleteUser","userId","getWindowDimensions","window","width","innerWidth","height","innerHeight","pageYOffset","scrollHeight","document","App","setLoggedIn","users","setUsers","renderedUsers","setRenderedUsers","editableUser","setEditableUser","deletedUserId","setDeletedUserId","windowDimensions","setWindowDimensions","showMoreCards","setShowMoreCards","setIsAllCards","lastIndexPage","useRef","setIsLoadingCards","isLoadingSignin","setIsLoadingSignin","isLoadingAdd","setIsLoadingAdd","isLoadingUpdate","setIsLoadingUpdate","isLoadingDelete","setIsLoadingDelete","isAddUserPopupOpen","setIsAddUserPopupOpen","isUpdatePopupOpen","setIsUpdatePopupOpen","isConfirmationPopupOpen","setIsConfirmationPopupOpen","isErrorSigninResponse","setIsErrorSigninResponse","isErrorCreateResponse","setIsErrorCreateResponse","isErrorUpdateResponse","setIsErrorUpdateResponse","isErrorDeleteResponse","setIsErrorDeleteResponse","setIsError","reqresApi","closeAllPopups","downloadUsers","current","total_pages","catch","err","console","log","getItem","push","handleScroll","addEventListener","removeEventListener","handleEscClose","Provider","path","parse","error","exact","removeItem","PageNotFound","userData","updatedAt","u","newUser","createdAt","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3f569227.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nfunction useFormValidation(inputs, validateData) {\r\n  const [inputValues, setInputValues] = useState({                                                                          // Стейт со значениями инпутов для валидации\r\n    ...inputs\r\n  });\r\n  const [validationInput, setValidationInput] = useState({                                                                  // Стейт валидируемый инпут\r\n    name: '',\r\n    value: ''\r\n  });\r\n  const [enableValidation, setEnableValidation] = useState({ ...inputs });                                                  // Стейт состояния валидации инпутов выполнялась/не выполнялась\r\n  const [isValidForm, setIsValidForm] = useState(false);                                                                    // Стейт состояния форма валидна\r\n  const [validationErrors, setValidationErrors] = useState({});                                                             // Стейт ошибок валидации\r\n\r\n  // При изменении валидируемого инпута выполняется валидация его значения\r\n  useEffect(() => {\r\n    const enableFormValidation = Object.keys(enableValidation).every(key => {                                               // Валидация формы завершена, все поля формы провалидированы\r\n      return enableValidation[key];\r\n    });\r\n    // Если включена валидация поля, выполнить валидацию значения поля, записать ошибки\r\n    if (enableValidation[validationInput.name]) {\r\n      setValidationErrors({\r\n        ...validationErrors,\r\n        ...validateData(validationInput)\r\n      })\r\n    }\r\n\r\n    // Если выполнена валидация всех полей формы, обновить Стейт состояния валидации инпутов\r\n    if (enableFormValidation) {\r\n      setEnableValidation({\r\n        ...enableValidation,\r\n        form: true\r\n      });\r\n    }\r\n  }, [validationInput]);\r\n\r\n  // Валидация формы, проверка при изменении Стейта ошибок валидации\r\n  useEffect(() => {\r\n    const emptyValidationErrors = Object.keys(validationErrors).every(key => {                                              // Ошибки валидации отсутствуют\r\n      return !validationErrors[key];\r\n    });\r\n    enableValidation.form && emptyValidationErrors ? setIsValidForm(true) : setIsValidForm(false);                          // Если провалидированы все поля формы и отутствуют ошибки валидации - форма валидна\r\n  }, [validationErrors]);\r\n\r\n  // При первой загрузке компонента форма невалидна\r\n  useEffect(() => {\r\n    setIsValidForm(false);\r\n  }, []);\r\n\r\n  // Изменить валидируемый инпут\r\n  function changeValidationInput(input) {\r\n    const { name, value } = input;\r\n    setEnableValidation({\r\n      ...enableValidation,\r\n      [name]: true\r\n    });\r\n    setValidationInput({\r\n      ...validationInput,\r\n      name,\r\n      value\r\n    });\r\n  }\r\n\r\n  // Выполнить валидацию формы\r\n  function runFormValidation() {\r\n    for (const input in inputValues) {\r\n      changeValidationInput({ name: input, value: inputValues[input] });\r\n    }\r\n  }\r\n\r\n  // Задать значения инпутов\r\n  function setFormInputValues(inputs) {\r\n    setEnableValidation({\r\n      all: true\r\n    });\r\n    setInputValues({\r\n      ...inputValues,\r\n      ...inputs\r\n    });\r\n  }\r\n\r\n  // Очистить поля формы\r\n  function clearFormInputValues() {\r\n    setInputValues({});\r\n  }\r\n\r\n  // Очистить ошибки валидации\r\n  function clearValidationErrors() {\r\n    setValidationErrors({});\r\n  }\r\n\r\n  // Изменение Стейтов значений инпутов, валидации инпутов и валидируемого инпута при изменении значений инпутов\r\n  function handleChange(evt) {\r\n    const { name, value } = evt.target;\r\n    setInputValues({\r\n      ...inputValues,\r\n      [name]: value\r\n    });\r\n    changeValidationInput(evt.target);\r\n  }\r\n\r\n  return {\r\n    inputValues,\r\n    setFormInputValues,\r\n    clearFormInputValues,\r\n    clearValidationErrors,\r\n    validationErrors,\r\n    handleChange,\r\n    runFormValidation,\r\n    isValidForm\r\n  };\r\n}\r\n\r\nexport default useFormValidation;","const validationRequirements = {\r\n  first_name: {\r\n    empty: true,\r\n    regExp: /^[a-zA-Zа-яА-Я\\sё\\-]+$/i,\r\n    minLength: 2,\r\n    maxLength: 30,\r\n  },\r\n  last_name: {\r\n    empty: true,\r\n    regExp: /^[a-zA-Zа-яА-Я\\sё\\-]+$/i,\r\n    minLength: 2,\r\n    maxLength: 30,\r\n  },\r\n  email: {\r\n    empty: true,\r\n    regExp: /^(([^#<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n  },\r\n  avatar: {\r\n    regExp: /(https?:\\/\\/(([\\w-]+\\.)+)+([\\w])+((\\/[a-z_0-9\\-:~\\\\.%\\\\/?#[\\]@!$&'\\\\(\\\\)*+,;=]+)+)?)/i,\r\n  },\r\n\r\n  password: {\r\n    empty: true,\r\n    regExp: /^[a-zA-Z0-9:%.,_+~#=@]+$/,\r\n  }\r\n}\r\n\r\nconst validationErrorsText = {\r\n  first_name: {\r\n    empty: 'Пожалуйста, укажите имя',\r\n    regExp: 'Пожалуйста, используйте только буквы',\r\n    minLength: `Допускается имя не короче ${validationRequirements.first_name.minLength} символов`,\r\n    maxLength: `Допускается имя не длиннее ${validationRequirements.first_name.maxLength} символов`,\r\n  },\r\n  last_name: {\r\n    empty: 'Пожалуйста, укажите фамилию',\r\n    regExp: 'Пожалуйста, используйте только буквы',\r\n    minLength: `Допускается фамилия не короче ${validationRequirements.last_name.minLength} символов`,\r\n    maxLength: `Допускается фамилия не длиннее ${validationRequirements.last_name.maxLength} символов`,\r\n  },\r\n  email: {\r\n    empty: 'Пожалуйста, укажите Email',\r\n    regExp: 'Некорректный Email',\r\n  },\r\n  avatar: {\r\n    regExp: 'Некорректная ссылка',\r\n  },\r\n  password: {\r\n    empty: 'Пожалуйста, укажите пароль',\r\n    regExp: 'Пароль может состоять из латинских букв, цифр и специальных символов : % . , _ + ~ # = @',\r\n  }\r\n}\r\n\r\nfunction validateData(input) {\r\n  let errors = {};\r\n\r\n  // Проверка поля на пустоту\r\n  if (validationRequirements[input.name].empty && !input.value.trim()) {\r\n    errors[input.name] = validationErrorsText[input.name].empty;\r\n    return errors;\r\n  } else {\r\n    errors[input.name] = '';\r\n  }\r\n\r\n  // Проверка поля на регулярное выражение\r\n  if (validationRequirements[input.name].regExp && input.value && !validationRequirements[input.name].regExp.test(input.value)) {\r\n    errors[input.name] = validationErrorsText[input.name].regExp;\r\n    return errors;\r\n  } else {\r\n    errors[input.name] = '';\r\n  }\r\n\r\n  // Проверка поля на минимальную длину\r\n  if (validationRequirements[input.name].minLength && input.value.length < validationRequirements[input.name].minLength) {\r\n    errors[input.name] = validationErrorsText[input.name].minLength;\r\n    return errors;\r\n  } else {\r\n    errors[input.name] = '';\r\n  }\r\n\r\n  // Проверка поля на максимальную длину\r\n  if (validationRequirements[input.name].maxLength && input.value.length > validationRequirements[input.name].maxLength) {\r\n    errors[input.name] = validationErrorsText[input.name].maxLength;\r\n    return errors;\r\n  } else {\r\n    errors[input.name] = '';\r\n  }\r\n\r\n  return errors;\r\n}\r\n\r\nexport default validateData;","import React from 'react';\r\nimport useFormValidation from '../utils/useFormValidation';\r\nimport validateData from '../utils/validateData';\r\n\r\nfunction Login({ isLoading, isErrorResponse, handleLogin }) {\r\n  const { inputValues, handleChange, validationErrors, isValidForm } = useFormValidation({ email: '', password: '' }, validateData);\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    const { email, password } = inputValues;\r\n    if (!email || !password) {\r\n      return;\r\n    }\r\n    if (isValidForm) handleLogin(email, password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"sign\">\r\n      <div className=\"logo logo_align_center\">B</div>\r\n      <p className=\"sign__heading\">Рады видеть!</p>\r\n      <form\r\n        name=\"login-form\"\r\n        className=\"sign__form\"\r\n        onSubmit={handleSubmit}>\r\n        <fieldset className=\"sign__fieldset\">\r\n          <label className=\"sign__label\">\r\n            <span className=\"sign__field\">E-mail</span>\r\n            <input\r\n              type=\"text\"\r\n              name=\"email\"\r\n              value={inputValues.email}\r\n              className={`sign__input ${validationErrors.email && 'sign__input_type_error'}`}\r\n              onChange={handleChange}\r\n              autoComplete=\"off\"\r\n            />\r\n            {validationErrors.email &&\r\n              <p className=\"validity-error\">{validationErrors.email}</p>\r\n            }\r\n          </label>\r\n          <label className=\"sign__label\">\r\n            <span className=\"sign__field\">Пароль</span>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={inputValues.password}\r\n              className={`sign__input ${validationErrors.password && 'sign__input_type_error'}`}\r\n              onChange={handleChange}\r\n            />\r\n            {validationErrors.password &&\r\n              <p className=\"validity-error\">{validationErrors.password}</p>\r\n            }\r\n          </label>\r\n        </fieldset>\r\n        {isErrorResponse.status && <p className=\"server-error\">{isErrorResponse.message}</p>}\r\n        {isLoading && <div className=\"sign__preloader\" />}\r\n        {!isLoading && <button type=\"submit\" className=\"sign__button\" disabled={!isValidForm}>Войти</button>}\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div className=\"preloader\">\r\n            <div className=\"preloader__container\">\r\n                <span className=\"preloader__round\"></span>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Preloader;\r\n","import React from 'react';\r\n\r\nfunction Plug({ text }) {\r\n  return (\r\n    <p className=\"plug\">{text}</p>\r\n  )\r\n};\r\n\r\nexport default Plug;\r\n","export default __webpack_public_path__ + \"static/media/no-photo.9b04560d.svg\";","export const serverRejectMessage = 'Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз';\r\nexport const noDataMessage = 'Ничего не найдено';\r\nexport const reqresApiBaseUrl = 'https://reqres.in/api';\r\nexport const reqresImgBaseUrl = 'https://reqres.in/img';\r\n","import React, { useEffect, useState } from 'react';\r\nimport plugImage from '../images/no-photo.svg';\r\nimport { noDataMessage } from '../utils/constants';\r\n\r\nfunction UserCard({ card, onCardEdit, onCardDelete }) {\r\n  const [cardImage, setCardImage] = useState({\r\n    src: card.avatar,\r\n    alt: `${card.first_name} ${card.last_name}`,\r\n    errored: false\r\n  });\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  function handleError() {\r\n    if (!cardImage.errored) {\r\n      setCardImage({\r\n        ...cardImage,\r\n        src: plugImage,\r\n        alt: noDataMessage,\r\n        errored: true\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setCardImage({\r\n      ...cardImage,\r\n      src: card.avatar || plugImage,\r\n      alt: `${card.first_name} ${card.last_name}`,\r\n      errored: false\r\n    });\r\n  }, [card]);\r\n\r\n  return (\r\n    <li className=\"card\">\r\n      <div className=\"card__info\">\r\n        <img src={cardImage.src} alt={cardImage.alt} className={`card__image ${cardImage.errored && 'card__image_type_no-image'}`} onError={handleError} />\r\n        <h2 className=\"card__name\">{card.first_name} {card.last_name}</h2>\r\n        <p className=\"card__email\">{card.email}</p>\r\n      </div>\r\n      <div className=\"card__buttons\">\r\n        <button type=\"button\" className=\"card__button card__button_type_edit\" onClick={() => onCardEdit(card)}></button>\r\n        <button type=\"button\" className=\"card__button card__button_type_delete\" onClick={handleDeleteClick}></button>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default UserCard;\r\n","import React from 'react';\r\nimport Preloader from './Preloader';\r\nimport Plug from './Plug';\r\nimport UserCard from './UserCard';\r\n\r\nfunction Main({ cards, isLoadingCards, isAllCards, isError, onCardEdit, onCardDelete }) {\r\n  return (\r\n    <section className=\"elements\" >\r\n      {isError && isError.status && <Plug text={isError.message} />}\r\n      {!!cards.length &&\r\n        <ul className={`cards ${isAllCards && 'cards_quantity_max'}`}>\r\n          {\r\n            cards.map(card => (\r\n              <UserCard\r\n                card={card}\r\n                key={card.id}\r\n                onCardEdit={onCardEdit}\r\n                onCardDelete={onCardDelete}\r\n              />\r\n            ))}\r\n        </ul>\r\n      }\r\n      {isLoadingCards && <Preloader />}\r\n    </section >\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nexport const AppContext = React.createContext();\r\n","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { AppContext } from '../contexts/AppContext';\r\n\r\nfunction Header({ onAddUser, onClickSignout }) {\r\n  const value = useContext(AppContext);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"logo\">B</div>\r\n      {/* Меню авторизованный пользователь */}\r\n      {value.loggedIn &&\r\n        <div className=\"header__buttons\">\r\n          <button type=\"button\" className=\"header__button header__button_type_add-user\" onClick={onAddUser}>Создать пользователя</button>\r\n          <button type=\"button\" className=\"header__button\"><Link to=\"/signin\" className=\"header__link\" onClick={onClickSignout}>Выйти</Link></button>\r\n        </div>\r\n      }\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <section className=\"footer\">\r\n      <p className=\"footer__text\">&#169; 2021 Картотека пользователей от reqres.in</p>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React, { useContext } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { AppContext } from '../contexts/AppContext';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\n\r\nfunction ProtectedRoute({ component: Component, ...props }) {\r\n  const value = useContext(AppContext);\r\n  return (\r\n    <Route>\r\n      <Header {...props} />\r\n      {\r\n        value.loggedIn ? <Component {...props} /> : <Redirect to=\"/signin\" />\r\n      }\r\n      <Footer />\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nfunction NotFoundPage() {\r\n  const history = useHistory();\r\n\r\n  function handleClick() {\r\n    history.goBack();\r\n  }\r\n\r\n  return (\r\n    <section className=\"notFoundPage\">\r\n      <div className=\"notFoundPage__container\">\r\n        <p className=\"notFoundPage__title\">404</p>\r\n        <p className=\"notFoundPage__subtitle\">Страница не найдена</p>\r\n      </div>\r\n      <button type=\"button\" className=\"notFoundPage__button\" onClick={handleClick}>Назад</button>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default NotFoundPage;","import React from 'react';\r\n\r\nfunction PopupWithForm({ isOpened, name, title, children, onClose, onSubmit }) {\r\n  return (\r\n    <div className={`popup ${isOpened && 'popup_opened'} popup_type_${name}`} onClick={(e) => { if (e.target.classList.contains('popup')) onClose() }}>\r\n      <div className=\"popup__container\">\r\n        <button type=\"button\" className=\"popup__button popup__button_type_close-popup\" onClick={onClose}></button>\r\n        <form action=\"#\" name={`${name}`} className=\"form\" onSubmit={onSubmit} noValidate>\r\n          <h2 className={`popup__heading`}>{title}</h2>\r\n          {children}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport useFormValidation from '../utils/useFormValidation';\r\nimport validateData from '../utils/validateData';\r\n\r\nfunction EditProfilePopup({ currentUser, isOpen, onClose, onUpdate, isLoading, isErrorResponse }) {\r\n  const {\r\n    inputValues,\r\n    setFormInputValues,\r\n    clearValidationErrors,\r\n    handleChange,\r\n    validationErrors,\r\n    isValidForm\r\n  } = useFormValidation({\r\n    first_name: currentUser.first_name,\r\n    last_name: currentUser.last_name,\r\n    email: currentUser.email,\r\n    avatar: currentUser.avatar\r\n  }, validateData);\r\n\r\n  useEffect(() => {\r\n    clearValidationErrors();\r\n    setFormInputValues(currentUser);\r\n  }, [currentUser]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    const { id, first_name, last_name, email, avatar } = inputValues;\r\n    if (!first_name || !last_name || !email) {\r\n      return;\r\n    }\r\n    if (isValidForm) onUpdate({ id, first_name, last_name, email, avatar });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpened={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-user-data\"\r\n      title=\"Редактировать профиль\"\r\n    >\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"first_name\"\r\n          value={inputValues.first_name}\r\n          placeholder=\"Имя\"\r\n          className={`form__input ${validationErrors.first_name && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.first_name &&\r\n          <p className=\"validity-error\">{validationErrors.first_name}</p>\r\n        }\r\n      </label>\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"last_name\"\r\n          value={inputValues.last_name}\r\n          placeholder=\"Фамилия\"\r\n          className={`form__input ${validationErrors.last_name && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.last_name &&\r\n          <p className=\"validity-error\">{validationErrors.last_name}</p>\r\n        }\r\n      </label>\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"email\"\r\n          value={inputValues.email}\r\n          placeholder=\"Email\"\r\n          className={`form__input ${validationErrors.email && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.email &&\r\n          <p className=\"validity-error\">{validationErrors.email}</p>\r\n        }\r\n      </label>\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"avatar\"\r\n          value={inputValues.avatar}\r\n          placeholder=\"Ссылка на аватар\"\r\n          className={`form__input ${validationErrors.avatar && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.avatar &&\r\n          <p className=\"validity-error\">{validationErrors.avatar}</p>\r\n        }\r\n      </label>\r\n      {isErrorResponse.status && <p className=\"server-error\">{isErrorResponse.message}</p>}\r\n      {isLoading && <div className=\"preloader preloader_type_button\" />}\r\n      {!isLoading && <button type=\"submit\" className=\"form__button\" disabled={!isValidForm}>Сохранить</button>}\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport useFormValidation from '../utils/useFormValidation';\r\nimport validateData from '../utils/validateData';\r\nimport plugImage from '../images/no-photo.svg';\r\n\r\nfunction AddUserPopup({ isOpen, onClose, onAdd, isLoading, isErrorResponse }) {\r\n  const {\r\n    inputValues,\r\n    clearFormInputValues,\r\n    handleChange,\r\n    validationErrors,\r\n    isValidForm\r\n  } = useFormValidation({\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    avatar: ''\r\n  }, validateData);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    const { first_name, last_name, email, avatar = plugImage } = inputValues;\r\n    if (!first_name || !last_name || !email) {\r\n      return;\r\n    }\r\n    if (isValidForm) {\r\n      onAdd({ first_name, last_name, email, avatar });\r\n      clearFormInputValues();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpened={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"add-user\"\r\n      title=\"Новый пользователь\"\r\n    >\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"first_name\"\r\n          value={inputValues.first_name || ''}\r\n          placeholder=\"Имя\"\r\n          className={`form__input ${validationErrors.first_name && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.first_name &&\r\n          <p className=\"validity-error\">{validationErrors.first_name}</p>\r\n        }\r\n      </label>\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"last_name\"\r\n          value={inputValues.last_name || ''}\r\n          placeholder=\"Фамилия\"\r\n          className={`form__input ${validationErrors.last_name && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.last_name &&\r\n          <p className=\"validity-error\">{validationErrors.last_name}</p>\r\n        }\r\n      </label>\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"email\"\r\n          value={inputValues.email || ''}\r\n          placeholder=\"Email\"\r\n          className={`form__input ${validationErrors.email && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.email &&\r\n          <p className=\"validity-error\">{validationErrors.email}</p>\r\n        }\r\n      </label>\r\n      <label className=\"form__field\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"avatar\"\r\n          value={inputValues.avatar || ''}\r\n          placeholder=\"Ссылка на аватар\"\r\n          className={`form__input ${validationErrors.avatar && 'form__input_type_error'}`}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\" />\r\n        {validationErrors.avatar &&\r\n          <p className=\"validity-error\">{validationErrors.avatar}</p>\r\n        }\r\n      </label>\r\n      {isErrorResponse.status && <p className=\"sign__error\">{isErrorResponse.message}</p>}\r\n      {isLoading && <div className=\"preloader preloader_type_button\" />}\r\n      {!isLoading && <button type=\"submit\" className=\"form__button\" disabled={!isValidForm}>Создать</button>}\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddUserPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmationPopup({ cardId, isOpen, onClose, onCardDelete, isLoading, isErrorResponse }) {\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onCardDelete(cardId);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpened={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"delete-card\"\r\n      title=\"Вы уверены?\"\r\n    >\r\n      {isErrorResponse.status && <p className=\"sign__error\">{isErrorResponse.message}</p>}\r\n      {isLoading && <div className=\"preloader preloader_type_button\" />}\r\n      {!isLoading && <button type=\"submit\" className=\"form__button\">Да</button>}\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default ConfirmationPopup;\r\n","export const handleOriginalResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return res.text();\r\n}\r\n","import { handleOriginalResponse } from './utils';\r\n\r\nfunction ReqresApi(options) {\r\n  const { baseUrl } = options;\r\n\r\n  const authorize = (email, password) => {\r\n    return fetch(`${baseUrl}/login`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    })\r\n      .then(handleOriginalResponse)\r\n      .then(data => {\r\n        if (data.token) {\r\n          localStorage.setItem('token', data.token);\r\n          return data;\r\n        }\r\n        return data;\r\n      })\r\n  }\r\n\r\n  const getUsers = (pageNumber) => {\r\n    return fetch(`${baseUrl}/users?page=${pageNumber}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n      .then(handleOriginalResponse)\r\n  }\r\n\r\n  const createUser = (user) => {\r\n    return fetch(`${baseUrl}/users`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(user),\r\n    })\r\n      .then(handleOriginalResponse);\r\n  }\r\n\r\n  const updateUser = (user) => {\r\n    return fetch(`${baseUrl}/users/${user.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(user),\r\n    })\r\n      .then(handleOriginalResponse);\r\n  }\r\n\r\n  const deleteUser = (userId) => {\r\n    return fetch(`${baseUrl}/users/${userId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n  }\r\n\r\n  return {\r\n    authorize,\r\n    getUsers,\r\n    createUser,\r\n    updateUser,\r\n    deleteUser\r\n  }\r\n}\r\n\r\nexport default ReqresApi;\r\n","function getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height, pageYOffset } = window;\r\n  const { scrollHeight } = document.body;\r\n  return {\r\n    width,\r\n    height,\r\n    pageYOffset,\r\n    scrollHeight,\r\n  }\r\n}\r\n\r\nexport default getWindowDimensions;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport Login from './Login';\r\nimport Main from './Main';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport PageNotFound from './PageNotFound';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport AddUserPopup from './AddUserPopup';\r\nimport ConfirmationPopup from './ConfirmationPopup';\r\nimport ReqresApi from './../utils/ReqresApi';\r\nimport { reqresApiBaseUrl, serverRejectMessage } from '../utils/constants';\r\nimport { AppContext } from '../contexts/AppContext';\r\nimport getWindowDimensions from '../utils/getWindowDimensions';\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n  const [loggedIn, setLoggedIn] = useState(false);                                                    // Стейт-переменная статус пользователя, вход в систему\r\n  const [users, setUsers] = useState([]);                                                             // Стейт массив найденных пользователей\r\n  const [renderedUsers, setRenderedUsers] = useState([]);                                             // Стейт массив пользователей для рендера на странице\r\n  const [editableUser, setEditableUser] = useState({                                                  // Стейт редактируемого пользователя\r\n    id: '',\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    avatar: ''\r\n  })\r\n  const [deletedUserId, setDeletedUserId] = useState(0);                                              // Стейт id пользователя для удаления\r\n  const [windowDimensions, setWindowDimensions] = useState({});                                       // Стейт размеров окна\r\n  const [showMoreCards, setShowMoreCards] = useState(false);                                          // Стейт показать больше карточек\r\n  const [isAllCards, setIsAllCards] = useState(false);                                                // Стейт все карточки загружены\r\n  const lastIndexPage = useRef(1);                                                                    // Последний индекс страницы запроса на сервер\r\n  const [isLoadingCards, setIsLoadingCards] = useState(false);                                        // Стейт прелоадер загрузки карточек\r\n  const [isLoadingSignin, setIsLoadingSignin] = useState(false);                                      // Стейт прелоадер загрузки входа пользователя\r\n  const [isLoadingAdd, setIsLoadingAdd] = useState(false);                                            // Стейт прелоадер загрузки добавления пользователя\r\n  const [isLoadingUpdate, setIsLoadingUpdate] = useState(false);                                      // Стейт прелоадер загрузки обновления пользователя\r\n  const [isLoadingDelete, setIsLoadingDelete] = useState(false);                                      // Стейт прелоадер загрузки удаления пользователя\r\n  const [isAddUserPopupOpen, setIsAddUserPopupOpen] = useState(false);                                // Стейт попап добавления нового пользователя открыт\r\n  const [isUpdatePopupOpen, setIsUpdatePopupOpen] = useState(false);                                  // Стейт попап обновления данных пользователя открыт\r\n  const [isConfirmationPopupOpen, setIsConfirmationPopupOpen] = useState(false);                      // Стейт попап подтверждения удаления карточки открыт\r\n  const [isErrorSigninResponse, setIsErrorSigninResponse] = useState({                                // Стейт ошибки загрузки данных с сервера\r\n    status: false,\r\n    message: serverRejectMessage\r\n  });\r\n  const [isErrorCreateResponse, setIsErrorCreateResponse] = useState({\r\n    status: false,\r\n    message: serverRejectMessage\r\n  });\r\n  const [isErrorUpdateResponse, setIsErrorUpdateResponse] = useState({\r\n    status: false,\r\n    message: serverRejectMessage\r\n  });\r\n  const [isErrorDeleteResponse, setIsErrorDeleteResponse] = useState({\r\n    status: false,\r\n    message: serverRejectMessage\r\n  });\r\n  const [isError, setIsError] = useState({                                                            // Стейт ошибки загрузки данных\r\n    status: false,\r\n    message: serverRejectMessage\r\n  });\r\n\r\n  const reqresApi = ReqresApi({\r\n    baseUrl: reqresApiBaseUrl,\r\n  });\r\n\r\n  // Функция закрытия всех попапов\r\n  function closeAllPopups() {\r\n    setIsAddUserPopupOpen(false);\r\n    setIsUpdatePopupOpen(false);\r\n    setIsConfirmationPopupOpen(false);\r\n  }\r\n\r\n  // Загрузка данных пользователей\r\n  function downloadUsers() {\r\n    setIsLoadingCards(true);\r\n    reqresApi.getUsers(lastIndexPage.current)\r\n      .then(res => {\r\n        if (res.data.length && lastIndexPage.current <= res.total_pages) {\r\n          setUsers(res.data);\r\n          lastIndexPage.current++;\r\n        } else {\r\n          setUsers([]);\r\n          setIsAllCards(true);\r\n        }\r\n        setIsLoadingCards(false);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        setIsError({\r\n          ...isError,\r\n          status: true\r\n        });\r\n      });\r\n  }\r\n\r\n  // Обработчик клика по кнопке добавить пользователя\r\n  function handleAddUserClick() {\r\n    setIsAddUserPopupOpen(true);\r\n  }\r\n\r\n  // Обработчик добавления пользователя\r\n  function handleAddUserSubmit(newUser) {\r\n    setIsLoadingAdd(true);\r\n    setIsErrorCreateResponse({\r\n      ...isErrorCreateResponse,\r\n      status: false,\r\n      message: serverRejectMessage\r\n    });\r\n    reqresApi.createUser(newUser)\r\n      .then(res => {\r\n        if (res.createdAt) {\r\n          setRenderedUsers([\r\n            res,\r\n            ...renderedUsers\r\n          ]);\r\n          setIsLoadingAdd(false);\r\n          closeAllPopups();\r\n        } else {\r\n          setIsErrorCreateResponse({\r\n            ...isErrorCreateResponse,\r\n            status: true,\r\n            message: JSON.parse(res.text()).error\r\n          });\r\n        }\r\n      })\r\n  }\r\n\r\n  // Обработчик клика по кнопке редактирования профиля\r\n  function handleUpdateUserClick(currentUser) {\r\n    setIsUpdatePopupOpen(true);\r\n    setEditableUser({\r\n      ...editableUser,\r\n      id: currentUser.id,\r\n      first_name: currentUser.first_name,\r\n      last_name: currentUser.last_name,\r\n      email: currentUser.email,\r\n      avatar: currentUser.avatar\r\n    })\r\n  }\r\n\r\n  // Обработчик обновления данных пользователя\r\n  function handleUpdateUserSubmit(userData) {\r\n    setIsLoadingUpdate(true);\r\n    setIsErrorUpdateResponse({\r\n      ...isErrorUpdateResponse,\r\n      status: false,\r\n      message: serverRejectMessage\r\n    });\r\n    reqresApi.updateUser(userData)\r\n      .then(res => {\r\n        if (res.updatedAt) {\r\n          const { first_name, last_name, email, avatar } = res;\r\n          setRenderedUsers(renderedUsers.map(u => {\r\n            if (u.id === userData.id) {\r\n              return {\r\n                ...u,\r\n                first_name,\r\n                last_name,\r\n                email,\r\n                avatar\r\n              }\r\n            }\r\n            return u;\r\n          }));\r\n          setIsLoadingUpdate(false);\r\n          closeAllPopups();\r\n        } else {\r\n          setIsErrorUpdateResponse({\r\n            ...isErrorUpdateResponse,\r\n            status: true,\r\n            message: JSON.parse(res).error\r\n          });\r\n          setIsLoadingUpdate(false);\r\n        }\r\n\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  // Обработчик клика по кнопке удалить карточку\r\n  function handleDeleteUserClick(user) {\r\n    setDeletedUserId(user.id);\r\n    setIsConfirmationPopupOpen(true);\r\n  }\r\n\r\n  // Обработчик удаления карточки\r\n  function handleDeleteUserSubmit(userId) {\r\n    setIsLoadingDelete(true);\r\n    setIsErrorDeleteResponse({\r\n      ...isErrorDeleteResponse,\r\n      status: false,\r\n      message: serverRejectMessage\r\n    });\r\n    reqresApi.deleteUser(userId)\r\n      .then(res => {\r\n        if (res.status === 204) {\r\n          setRenderedUsers(renderedUsers.filter((u) => u.id !== userId));\r\n          closeAllPopups();\r\n        } else {\r\n          setIsErrorDeleteResponse({\r\n            ...isErrorDeleteResponse,\r\n            status: true,\r\n            message: JSON.parse(res.text()).error\r\n          });\r\n        }\r\n        setIsLoadingDelete(false);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  // Обработчик по кнопке Войти\r\n  function handleLogin(email, password) {\r\n    setIsLoadingSignin(true);\r\n    setIsErrorSigninResponse({\r\n      ...isErrorSigninResponse,\r\n      status: false\r\n    });\r\n    reqresApi.authorize(email, password)\r\n      .then(data => {\r\n        setIsLoadingSignin(false);\r\n        if (data.token) {\r\n          setLoggedIn(true);\r\n          history.push('/');\r\n        } else {\r\n          setIsErrorSigninResponse({\r\n            ...isErrorSigninResponse,\r\n            status: true,\r\n            message: JSON.parse(data).error\r\n          });\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  // Выход из аккаунта\r\n  function handleSignout() {\r\n    localStorage.removeItem('token');\r\n    setLoggedIn(false);\r\n    lastIndexPage.current = 1;\r\n    setIsAllCards(false);\r\n    setRenderedUsers([]);\r\n    downloadUsers();\r\n    history.push('/signin');\r\n  }\r\n\r\n  // Проверка токена при повторном посещении сайта\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      history.push('/');\r\n      setLoggedIn(true);\r\n    } else {\r\n      setLoggedIn(false);\r\n    }\r\n  }, []);\r\n\r\n  // Первичная загрузка данных пользователей\r\n  useEffect(() => {\r\n    downloadUsers();\r\n    setRenderedUsers([...users]);\r\n  }, []);\r\n\r\n  // Отрисовать загруженных пользователей\r\n  useEffect(() => {\r\n    if (users.length) {\r\n      setRenderedUsers([\r\n        ...renderedUsers,\r\n        ...users\r\n      ]);\r\n    }\r\n  }, [users]);\r\n\r\n  // Слушатель скролла на странице\r\n  useEffect(() => {\r\n    function handleScroll() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  // Проверка прокрутки скролла\r\n  useEffect(() => {\r\n    if (windowDimensions.height + windowDimensions.pageYOffset === windowDimensions.scrollHeight) {\r\n      setShowMoreCards(true);\r\n    } else {\r\n      setShowMoreCards(false);\r\n    }\r\n  }, [windowDimensions])\r\n\r\n  // Добавить пользователей по скроллу\r\n  useEffect(() => {\r\n    if (showMoreCards && !isAllCards) {\r\n      downloadUsers();\r\n    }\r\n  }, [showMoreCards])\r\n\r\n  // Добавить/удалить слушателя нажатия Esc при открытии попапа\r\n  useEffect(() => {\r\n    function handleEscClose(evt) {\r\n      if (evt.key === 'Escape') {\r\n        closeAllPopups();\r\n      };\r\n    }\r\n\r\n    (isAddUserPopupOpen || isUpdatePopupOpen || isConfirmationPopupOpen) && document.addEventListener('keydown', handleEscClose);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscClose);\r\n    }\r\n  }, [isAddUserPopupOpen, isUpdatePopupOpen, isConfirmationPopupOpen, closeAllPopups]);\r\n\r\n  return (\r\n    <AppContext.Provider value={{ loggedIn }}>\r\n      <div className=\"page__container\">\r\n        <Switch>\r\n          <Route path=\"/signin\">\r\n            <Login\r\n              handleLogin={handleLogin}\r\n              isLoading={isLoadingSignin}\r\n              isErrorResponse={isErrorSigninResponse}\r\n            />\r\n          </Route>\r\n          <ProtectedRoute\r\n            exact path=\"./\"\r\n            component={Main}\r\n            onAddUser={handleAddUserClick}\r\n            onClickSignout={handleSignout}\r\n            cards={renderedUsers}\r\n            isLoadingCards={isLoadingCards}\r\n            isAllCards={isAllCards}\r\n            isError={isError}\r\n            onCardEdit={handleUpdateUserClick}\r\n            onCardDelete={handleDeleteUserClick}\r\n          >\r\n          </ProtectedRoute>\r\n          <Route path=\"*\">\r\n            <PageNotFound />\r\n          </Route>\r\n        </Switch>\r\n        {/* <!-- Попап редактировать профиль --> */}\r\n        <EditProfilePopup\r\n          currentUser={editableUser}\r\n          isOpen={isUpdatePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdate={handleUpdateUserSubmit}\r\n          isLoading={isLoadingUpdate}\r\n          isErrorResponse={isErrorUpdateResponse}\r\n        />\r\n        {/* <!-- Попап добавить карточку --> */}\r\n        <AddUserPopup\r\n          isOpen={isAddUserPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAdd={handleAddUserSubmit}\r\n          isLoading={isLoadingAdd}\r\n          isErrorResponse={isErrorCreateResponse}\r\n        />\r\n        {/* <!-- Попап удаления карточки --> */}\r\n        <ConfirmationPopup\r\n          isOpen={isConfirmationPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onCardDelete={handleDeleteUserSubmit}\r\n          cardId={deletedUserId}\r\n          isLoading={isLoadingDelete}\r\n          isErrorResponse={isErrorDeleteResponse}\r\n        />\r\n      </div>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}